

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
  
  <title>使用fullscreen API全屏浏览网页 | ForeverYoung</title>
  <meta name="author" content="BeYoung">
  
  <meta name="description" content="Just another weblog.">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="使用fullscreen API全屏浏览网页"/>
  <meta property="og:site_name" content="ForeverYoung"/>

  
    <meta property="og:image" content="http://beyoung.me/images/gravatar.png"/>
  

  <link href="/favicon.png" rel="icon">

  <link rel="alternate" href="/atom.xml" title="ForeverYoung" type="application/atom+xml">

  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">

  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="http://cdn.staticfile.org/jquery/2.1.1-rc2/jquery.min.js"></script>
  
  
</head>


<body>
    <div class="container">
      <div class="left-col">
        <div class="intrude-less">
          <header id="header" class="inner">
            <div class="profilepic">
  <img src="/images/gravatar.png"/>
</div><!-- profilepic -->
<h1><a href="/">BeYoung</a></h1>
<p class="subtitle">Remember, Let go, Move on.</p>
<nav id="main-nav">
  <ul class="main">
    
      <li>
      <a href="/">Blog</a>
      </li>
    
      <li>
      <a href="/archives">Archives</a>
      </li>
    
      <li>
      <a href="/project">Project</a>
      </li>
    
      <li>
      <a href="/about">About</a>
      </li>
    
  </ul>
  
  <section class="aboutme">
    <p>
      Just another weblog.
    </p>
  </section>
  
</nav><!-- main-nav -->
<nav id="sub-nav">
  <div class="social">
    
      <a class="weibo" href="http://weibo.com/710200711"
         title="weibo">weibo</a>
    
    
      <a class="google" href="http://plus.google.com/114027670572929172581"
         title="Google+">Google+</a>
    
    
      <a class="github" href="http://github.com/xuhong"
         title="Github">Github</a>
    
    
        <a class="rss" href="/atom.xml" title="RSS">RSS</a>
    
  </div>
</nav><!-- sub-nav -->
<!--nav id="widget-nav">
  <div class="widgets">
    
      
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/HTML5/">HTML5</a><small>3</small></li>
  
    <li><a href="/tags/Life/">Life</a><small>1</small></li>
  
    <li><a href="/tags/algorithm/">algorithm</a><small>1</small></li>
  
    <li><a href="/tags/blog/">blog</a><small>1</small></li>
  
    <li><a href="/tags/css3/">css3</a><small>1</small></li>
  
    <li><a href="/tags/flexbox/">flexbox</a><small>1</small></li>
  
    <li><a href="/tags/fullscreen/">fullscreen</a><small>1</small></li>
  
    <li><a href="/tags/geolocation/">geolocation</a><small>1</small></li>
  
    <li><a href="/tags/gevent/">gevent</a><small>1</small></li>
  
    <li><a href="/tags/inherit/">inherit</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>2</small></li>
  
    <li><a href="/tags/notification/">notification</a><small>1</small></li>
  
    <li><a href="/tags/python/">python</a><small>2</small></li>
  
    <li><a href="/tags/thought/">thought</a><small>1</small></li>
  
  </ul>
</div>


    
  </div>
</nav--><!-- widget-nav -->

          <header>
        </div><!-- intrude-less -->
      </div><!-- left-col -->
      <div class="mid-col">
        <div class="mid-col-container">
      <div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
	<!--div class="meta">
          
<div class="date">

<time datetime="2014-05-23T15:36:11.000Z"
      
      data-updated="true"
       itemprop="datePublished">
  May 23 2014
</time>





</div>

	</div-->

        <h1 class="title" itemprop="name">使用fullscreen API全屏浏览网页<div class="menu">
          <i class="icon-list"></i>
          <i class="icon-expand"></i>
        </div></h1>
      	<div class="entry-content" itemprop="articleBody"><p>给博客加了一个小功能，全屏显示页面，使用的是HTML5的Fullscreen API，简单介绍一下这个API的使用。</p>
<h3>如何使用</h3>
<h4>方法</h4>
<p>有两个方法，用来进入全屏和取消全屏，分别是</p>
<ul>
<li><code>requestFullscreen()</code></li>
<li><code>cancleFullscreen()/exitFullscreen()</code></li>
</ul>
<h4>属性</h4>
<p>以及两个只读属性，分别是当前全屏展示的元素和全屏是否允许，</p>
<ul>
<li><code>document.webkitFullscreenElement(返回节点)</code></li>
<li><code>document.webkitFullscreenEnabled(返回布尔值)</code></li>
</ul>
<p>HTML 标签属性: allowFullScreen，像flash使用的<code>&lt;object&gt;</code>和<code>&lt;embed&gt;</code>可以设置是否允许全屏，这个特性同样可以应用于<code>&lt;iframe&gt;</code>标签：</p>
<pre><code><span class="tag">&lt;<span class="title">iframe</span> <span class="attribute">src</span>=<span class="value">""</span> <span class="attribute">allowFullScreen</span>=<span class="value">""</span>&gt;</span><span class="tag">&lt;/<span class="title">iframe</span>&gt;</span>    </code></pre>
<p><a id="more"></a></p>
<h4>全屏样式</h4>
<p>全屏元素：</p>
<pre><code><span class="id">#rosa</span><span class="pseudo">:-webkit-full-screen</span><span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100</span>%;</span></span>
    <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">100</span>%;</span></span>
    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#11ee11</span>;</span></span>
<span class="rule">}</span></span>
<span class="id">#rosa</span><span class="pseudo">:-moz-full-screen</span><span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100</span>%;</span></span>
    <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">100</span>%;</span></span>
    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#11ee11</span>;</span></span>
<span class="rule">}</span></span>
<span class="id">#rosa</span><span class="pseudo">:-ms-fullscreen</span><span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100</span>%;</span></span>
    <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">100</span>%;</span></span>
    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#11ee11</span>;</span></span>
<span class="rule">}</span></span>
<span class="id">#rosa</span><span class="pseudo">:fullscreen</span><span class="rules">{
    <span class="rule"><span class="attribute">width</span>:<span class="value"><span class="number">100</span>%;</span></span>
    <span class="rule"><span class="attribute">height</span>:<span class="value"><span class="number">100</span>%;</span></span>
    <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#11ee11</span>;</span></span>
<span class="rule">}</span></span></code></pre>
<p>所有全屏化的祖先元素：</p>
<pre><code><span class="id">#rosa</span><span class="pseudo">:fullscreen-ancestor</span><span class="rules">{
    <span class="rule"><span class="attribute">z-index</span>:<span class="value"> -<span class="number">1</span>;</span></span>
<span class="rule">}</span></span></code></pre>
<h4>监听状态变化</h4>
<p>可以监听全屏状态的变化：</p>
<pre><code>element.addEventListener(<span class="string">"fullscreenchange"</span>, <span class="keyword">function</span>(e){
    <span class="comment">//不同的浏览器需要添加相应的前缀，webkit、moz、ms;</span>
})    </code></pre>
<h3>例子</h3>
<p>点击下面的红色方块，将会使这个方块进去全屏样式，并且改变背景的颜色。或者点击页面右上角的全屏图标也可以进入全屏。</p>
<p><p data-height="268" data-theme-id="0" data-slug-hash="pfybn" data-default-tab="result" class='codepen'>See the Pen <a href='http://codepen.io/xuhong/pen/pfybn/'>pfybn</a> by 旭鸿 (<a href='http://codepen.io/xuhong'>@xuhong</a>) on <a href='http://codepen.io'>CodePen</a>.</p></p>
<script async src="//codepen.io/assets/embed/ei.js"></script>

<pre><code><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">
    <span class="function"><span class="keyword">function</span> <span class="title">launchFullscreen</span><span class="params">(element)</span> {</span>
      <span class="keyword">if</span>(element.requestFullscreen) {
        element.requestFullscreen();
      } <span class="keyword">else</span> <span class="keyword">if</span>(element.mozRequestFullScreen) {
        element.mozRequestFullScreen();
      } <span class="keyword">else</span> <span class="keyword">if</span>(element.webkitRequestFullscreen) {
        element.webkitRequestFullscreen();
      } <span class="keyword">else</span> <span class="keyword">if</span>(element.msRequestFullscreen) {
        element.msRequestFullscreen();
      }
    }

    <span class="function"><span class="keyword">function</span> <span class="title">exitFullscreen</span><span class="params">()</span>{</span>
        <span class="keyword">if</span>(document.exitFullscreen) {
        document.exitFullscreen();
      } <span class="keyword">else</span> <span class="keyword">if</span>(document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
      } <span class="keyword">else</span> <span class="keyword">if</span>(document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
      } <span class="keyword">else</span> <span class="keyword">if</span>(document.msExitFullscreen) {
          document.msExitFullscreen();
      }
    }

    <span class="keyword">var</span> rosa = document.getElementById(<span class="string">'rosa'</span>);        
    <span class="keyword">var</span> btn1 = document.getElementsByTagName(<span class="string">"button"</span>)[<span class="number">0</span>];
    <span class="keyword">var</span> btn2 = document.getElementsByTagName(<span class="string">"button"</span>)[<span class="number">1</span>];

    document.addEventListener(<span class="string">"keydown"</span>, <span class="keyword">function</span>(e) {
        <span class="keyword">if</span> (e.keyCode == <span class="number">13</span>) {
            launchFullscreen(rosa);
        }
    });
    btn1.addEventListener(<span class="string">"click"</span>, <span class="keyword">function</span>(){
        launchFullscreen(rosa);
    });
    btn2.addEventListener(<span class="string">"click"</span>, <span class="keyword">function</span>(){
        exitFullscreen();
    })
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></code></pre>
<h3>兼容性</h3>
<p>在桌面上主流浏览器（只测试了最新版）都支持，移动设备上呢，经测试firefox和chrome都支持啦，国产浏览器测试了UC和QQ浏览器，不负众望，都不支持。。。</p>
<p><img src="/img/post/caniusefs.png" alt="caniuse"></p>
<h3>一点心得</h3>
<p>其实我们对全屏并不陌生，我们在看视频的时候经常会使用全屏模式，当然，之前的那些都不是HTML5实现的。全屏的好处就是可以屏蔽掉那些可能分散我们注意力的元素，让我们可以更加专注于感兴趣的东西。这个api非常适合在mobile上web app使用，当进入全屏以后，整个感觉就像是一个完全独立的应用，非常的原生态。另外发现一个奇怪的bug，<strong>fullscreen的样式必须分开写，而不能用逗号隔开写在一起</strong></p>
<h3>参考资料</h3>
<ul>
<li>MSDN: <a href="http://msdn.microsoft.com/en-us/library/ie/dn265028.aspx" target="_blank">Fullscreen API</a></li>
<li>MDN: <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Using_full_screen_mode" target="_blank">Using_full_screen_mode</a></li>
<li>W3C <a href="https://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html" target="_blank">Fullscreen</a></li>
<li><a href="http://davidwalsh.name/fullscreen" target="_blank">davidwalsh blog</a></li>
</ul>
</div>


</article>

  <!--div class="share">
  <div class="addthis_toolbox addthis_default_style ">
  
  
  
  <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
  
  
  </div>
  <script type="text/javascript">
    var addthis_config = {"data_track_addressbar":true};
  </script>
  <script type="text/javascript"
          src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=undefined">
  </script>
</div-->



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the
  <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<div class="ds-thread"></div></div>
</section>

<script src="/js/article.js"></script>
</div>
  </div>
        <footer id="footer" class="inner">
          Copyright © 2013  BeYoung 

        </footer>
        
<script src="/js/slash.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
  var disqus_shortname = 'beyoungme';

  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  }());
  </script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>




      </div><!-- mid-col -->
    </div><!-- container -->
</body>
</html>

